sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/core/BusyIndicator"],function(e,s,t){"use strict";return e.extend("Jepco.ISU.DM.smartmeter.controller.Login",{onRememberMe:function(e){var s=this.getView().byId("idUser").getValue();var t=this.getView().byId("idPass").getValue();document.cookie="myusername="+s+";path=http://localhost/web6pm/; expires="+new Date(9999,1,1).toUTCString();document.cookie="mypassword="+t+";path=http://localhost/web6pm/; expires="+new Date(9999,1,1).toUTCString()},OnRestPassPress:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("RestPass")},onShowPassword:function(){var e=this.getView().byId("idPass").getType();if(e==="Password"){this.getView().byId("idPass").setType("Text");this.getView().byId("idPass").setValueHelpIconSrc("sap-icon://hide")}else{this.getView().byId("idPass").setType("Password");this.getView().byId("idPass").setValueHelpIconSrc("sap-icon://show")}},OnLoginPress:function(){var e=this.getView().byId("idUser").getValue();var o=this.getView().byId("idPass").getValue();var r={oUserName:e};var a=new sap.ui.model.json.JSONModel;a.setData({globalData:r});sap.ui.getCore().setModel(a);var n=sap.ui.core.UIComponent.getRouterFor(this);var i=e+"-"+o;const c=[];let p="http://85.159.218.156:8000/sap/opu/odata/sap/ZCOMMDTL_SRV/ZENG_USERSet?$filter=startswith(EngTechUser,'"+i+"')&$format=json";$.ajax({type:"POST",url:"https://portal.jepco.com.jo/JepcoSAPProxyPRD/SapProxy/GetEng_MeterSet",dataType:"json",contentType:"application/json",data:JSON.stringify({strEngUserName:i}),success:function(t,o,r){console.log("first success");if(typeof r.responseJSON.d=="undefined"){s.error("خطأ فني، يرجى المحاولة لاحقا")}var a=r.responseJSON.d.results;for(const e in a){console.log(a[e].engTechUser);var i=a[e].engTechUser.toLowerCase();c.push(i)}console.log("array engTechUser ",c);localStorage.setItem("engTechUser",JSON.stringify(c));localStorage.setItem("user",e);n.navTo("Main")},error:function(e){console.log(e);t.hide();if(e.responseJSON){var o=e.responseJSON;var r=e.responseJSON.errors.error.message.value;s.error(r)}else{s.error("خطأ فني، يرجى المحاولة مرة اخرى لاحقا")}}})}})});